#! /bin/bash

export MM="$HOME/.nb-curator/mm"

export OS=$(uname -s | awk '{ print tolower($1); } ')
export ARCH=$(uname -m | awk '{ print tolower($1); }')

case "$OS-$ARCH" in
    linux-x86_64)
	URL=https://micro.mamba.pm/api/micromamba/linux-64/latest
	;;
    linux-arm|linux-arm64|linux-aarch64)
	URL=https://micro.mamba.pm/api/micromamba/linux-aarch64/latest
	;;
    darwin-x86_64)
	URL=https://micro.mamba.pm/api/micromamba/osx-64/latest
	;;
    darwin-arm64)
	URL=https://micro.mamba.pm/api/micromamba/osx-arm64/latest
	;;
    *) 
	;;
esac

export MAMBA_ROOT_PREFIX=${MM}
export PATH=${MM}/bin:${PATH}
export PATH=${MM}/envs/nbcuator/bin:${PATH}

if [ -f ${MM}/bin/micromamba ]; then
    eval "$(micromamba shell hook --shell bash)"
    micromamba activate nbcurator
fi



# Linux Intel (x86_64):
# curl -Ls https://micro.mamba.pm/api/micromamba/linux-64/latest | tar -xvj bin/micromamba
# # Linux ARM64:
# curl -Ls https://micro.mamba.pm/api/micromamba/linux-aarch64/latest | tar -xvj bin/micromamba
# # Linux Power:
# curl -Ls https://micro.mamba.pm/api/micromamba/linux-ppc64le/latest | tar -xvj bin/micromamba
# # macOS Intel (x86_64):
# curl -Ls https://micro.mamba.pm/api/micromamba/osx-64/latest | tar -xvj bin/micromamba
# # macOS Silicon/M1 (ARM64):
# curl -Ls https://micro.mamba.pm/api/micromamba/osx-arm64/latest | tar -xvj bin/micromamba

